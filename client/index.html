<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Centro de Control — Alertas en Tiempo Real</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="container">
            <header class="header" role="banner">
                <div class="header-content">
                    <div class="header-left">
                        <h1>Centro de Control — Seguridad Industrial</h1>
                        <p class="subtitle">Cuenca — Monitoreo en tiempo real</p>
                    </div>

                    <div class="header-right">
                        <div class="status-indicator" aria-live="polite" aria-atomic="true">
                            <span id="connection-status" class="status-dot disconnected" aria-hidden="true"></span>
                            <span id="connection-text">Desconectado</span>
                        </div>

                        <div class="client-info" aria-hidden="false">
                            <span id="client-id">ID: —</span>
                            <span id="clients-connected">Operadores: 0</span>
                        </div>
                    </div>
                </div>
            </header>

            <main class="main-content" role="main">
                <!-- Resumen -->
                <section class="summary-panel" aria-label="Resumen de alertas">
                    <div class="summary-card critical" role="region" aria-label="Críticas">
                        <div class="summary-icon" aria-hidden="true">
                            <!-- small red circle icon -->
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <circle cx="12" cy="12" r="10" fill="#ef4444" />
                            </svg>
                        </div>
                        <div class="summary-info">
                            <h3>Críticas</h3>
                            <p id="count-critical" class="count">0</p>
                        </div>
                    </div>

                    <div class="summary-card warning" role="region" aria-label="Advertencias">
                        <div class="summary-icon" aria-hidden="true">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 20h20L12 2z" fill="#f59e0b"/></svg>
                        </div>
                        <div class="summary-info">
                            <h3>Advertencias</h3>
                            <p id="count-warning" class="count">0</p>
                        </div>
                    </div>

                    <div class="summary-card normal" role="region" aria-label="Normales">
                        <div class="summary-icon" aria-hidden="true">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="#10b981"/></svg>
                        </div>
                        <div class="summary-info">
                            <h3>Normales</h3>
                            <p id="count-normal" class="count">0</p>
                        </div>
                    </div>

                    <div class="summary-card info" role="region" aria-label="Total">
                        <div class="summary-icon" aria-hidden="true">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><rect x="3" y="7" width="4" height="10" fill="#64748b"/><rect x="9" y="4" width="4" height="13" fill="#64748b"/><rect x="15" y="10" width="4" height="7" fill="#64748b"/></svg>
                        </div>
                        <div class="summary-info">
                            <h3>Total</h3>
                            <p id="count-total" class="count">0</p>
                        </div>
                    </div>
                </section>

                <!-- Controles -->
                <section class="controls-panel" aria-label="Controles">
                    <button id="btn-clear" class="btn btn-secondary" aria-label="Limpiar alertas">Limpiar</button>
                    <button id="btn-auto-scroll" class="btn btn-secondary active" aria-pressed="true">Auto-scroll</button>

                    <label class="filter-label" for="filter-level">
                        <span>Filtrar por nivel</span>
                        <select id="filter-level" name="filter-level">
                            <option value="">Todas</option>
                            <option value="rojo">Críticas (Rojo)</option>
                            <option value="amarillo">Advertencias (Amarillo)</option>
                            <option value="verde">Normales (Verde)</option>
                        </select>
                    </label>
                </section>

                <!-- Alertas en tiempo real -->
                <section class="alerts-section" aria-label="Alertas en tiempo real">
                    <div class="alerts-header">
                        <h2>Alertas en Tiempo Real</h2>
                        <span id="last-update" class="last-update">Última actualización: —</span>
                    </div>

                    <div class="alerts-container">
                        <div id="alerts-list" class="alerts-list" aria-live="polite">
                            <div class="empty-state">
                                <svg class="empty-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7h18v10H3z" stroke="#94a3b8" stroke-width="1.2" fill="none"/><path d="M7 11h10" stroke="#94a3b8" stroke-width="1.2" stroke-linecap="round"/></svg>
                                <p>Esperando alertas...</p>
                                <small>Las alertas aparecerán aquí en tiempo real</small>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <footer class="footer" role="contentinfo">
                <p>
                    Sistema WebSocket de Alertas — Centro de Control de Cuenca
                    <span id="current-time">--:--:--</span>
                </p>
            </footer>
        </div>

        <script src="app.js" defer></script>
    </body>
</html>
